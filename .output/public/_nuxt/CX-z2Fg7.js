import{_ as M,o as i,c as g,d as R,t as h,Z as D,u as H,r as y,Y as j,m as J,z as B,$ as O,p as A,a0 as L,R as d,a as e,N as V,O as G,w as o,T as q,b as r,K as Y,a1 as K,P as W,F as Z,q as Q,D as X,H as $,a2 as ee,v as se,I as ae,J as te}from"./Bs-UNA1x.js";/* empty css        *//* empty css        */import{n as oe,u as re,a as le,f as ne}from"./CxXkdaAk.js";/* empty css        *//* empty css        *//* empty css        */import{s as ie}from"./0w2KYoZK.js";const de={name:"app-button",props:["text","disabled"],setup(){return{}}},ce=["disabled"];function pe(w,s,f,a,c,F){return i(),g("button",{type:"button",class:"app-button",disabled:f.disabled},[R(h(f.text)+" ",1),D(w.$slots,"default")],8,ce)}const me=M(de,[["render",pe]]),ue={components:{},async setup(){const w=H(),s=O(),{apiUrl:f}=s.public,a=y(!1),c=y({secs:0,mins:0}),F=j(()=>(100-(c.value.mins*60+c.value.secs)/3e3*100).toFixed()),x=await J("/face/progressItem");if(x.estimatedSec){a.value=!0;const l=x.estimatedSec;(b=>{let N,S;function T(){let v=N;v>0?N--:clearInterval(S);let U=Math.floor(v/60);v%=60;let z=U+":"+v;c.value.secs=v,c.value.mins=U,console.log({pretty:z})}N=b,T(),S=ie(()=>T(),1e3)})(l)}const p=y(!1),m=y(!1),P=f+"/face/uploadFile",u=(l,n,b)=>{m.value=!1,t.images.push(l.file)},k=(l,n,b)=>{m.value=!0},E=(l,n,b)=>{m.value=!1,oe.error()},I=l=>{t.images.splice(t.images.findIndex(n=>n===l),1)},C=B({faceName:[le],images:[ne]}),_=y(),t=B({id:null,faceName:null,images:[],key:null});return t.key=(Date.now()+Math.random()).toFixed(0).toString(),{store:w,loading:p,formRules:C,form:t,formRuleRef:_,submitForm:async()=>{if(await re(_.value)){if(p.value=!0,t.id){const{data:l,error:n}=await A(`/face/${t.id}`,"PATCH",{...t});n.value||await L({name:"myFaces-id",params:{id:l.value.id}})}if(!t.id){const{data:l,error:n}=await A("/face","POST",{...t});n.value||await L({name:"myFaces-id",params:{id:l.value.id}})}p.value=!1}},updateUrl:P,updateLoading:m,on_success:u,on_progress:k,on_error:E,deleteImage:I,progressShow:a,progressPrettyTimer:c,progressPercent:F}}},ge=d("/icon/upload-icon.png"),fe=d("/icon/aiGenerator-white.svg"),_e=d("/img/face/c1.png"),be=d("/img/face/c2.png"),ve=d("/img/face/c3.png"),ye=d("/img/face/n1.png"),he=d("/img/face/n2.png"),we=d("/img/face/n3.png"),xe={key:0,"element-loading-text":"Loading..."},ke={class:"bg-grey app-base-padding app-base-border-radius"},Fe={class:"my-faces-create-el-upload-label"},Pe={style:{width:"100%"}},Ee={class:"my-faces-create-el-upload-images"},Ie={class:"my-faces-create-el-upload-image"},Ce={style:{padding:"2px"}},Ne=["src"],Re={class:"bg-grey app-base-padding app-base-border-radius"},Se={key:1,class:"myFaces-create-progress-block"},Te={class:"myFaces-create-progress-block-body app-base-border-radius app-base-padding"},Ue={class:"myFaces-create-progress-block-body-progress"},Be={class:"myFaces-create-progress-block-body-info"};function Ae(w,s,f,a,c,F){const x=X,p=$,m=ee,P=se,u=ae,k=te,E=Y,I=K,C=me,_=W;return i(),g("div",null,[a.progressShow?q("",!0):(i(),g("div",xe,[s[8]||(s[8]=e("h1",null,"Upload your photos to create a new face",-1)),s[9]||(s[9]=e("p",null,"To get the best results, please upload 5 to 20 high-quality photos and wait for AI to learn your face",-1)),s[10]||(s[10]=e("div",{class:"app-base-border-radius app-base-margin-top-bottom",style:{width:"100%"}},null,-1)),V((i(),G(E,{"label-position":"top",ref:"formRuleRef",model:a.form,rules:a.formRules},{default:o(()=>[r(k,{gutter:15},{default:o(()=>[r(u,{span:12,xs:24},{default:o(()=>[e("div",ke,[r(p,{prop:"faceName",label:"Enter a name"},{default:o(()=>[r(x,{modelValue:a.form.faceName,"onUpdate:modelValue":s[0]||(s[0]=t=>a.form.faceName=t),placeholder:"Mark",size:"large"},null,8,["modelValue"])]),_:1}),r(p,{prop:"images",label:""},{default:o(()=>[e("label",Fe,[s[1]||(s[1]=e("span",null,"Upload photos",-1)),e("span",null,h(a.form.images.length)+"/20",1)]),e("div",Pe,[V((i(),G(m,{ref:"uploadRef",drag:"",accept:"image/png, image/jpeg, image/jpg",limit:20,"on-success":a.on_success,"on-progress":a.on_progress,"on-error":a.on_error,"auto-upload":!0,action:a.updateUrl,headers:{Authorization:"Bearer "+a.store.accessToken},data:{key:a.form.key},multiple:!0,"show-file-list":!1},{default:o(()=>s[2]||(s[2]=[e("div",{class:"my-faces-create-el-upload-body"},[e("div",null,[e("img",{src:ge})]),e("div",{class:"my-faces-create-el-upload-body-text"},[e("span",{class:"app-orange-text my-faces-create-el-upload-body-text-choose-a-file"},"Choose a file"),e("span",{class:"app-grey-text"},"or drag it here"),e("br"),e("span",{class:"app-grey-text"},"PNG, JPG, WEBP or HEIC (max. 3MB)")])],-1)])),_:1},8,["on-success","on-progress","on-error","action","headers","data"])),[[_,a.updateLoading]])]),e("div",Ee,[(i(!0),g(Z,null,Q(a.form.images,t=>(i(),g("div",Ie,[e("div",Ce,[e("img",{src:t},null,8,Ne)])]))),256))])]),_:1}),r(p,null,{default:o(()=>{var t;return[r(P,{type:"primary",size:"large",onClick:a.submitForm,disabled:!((t=a.store.getUser)!=null&&t.facesCount)},{default:o(()=>s[3]||(s[3]=[e("img",{src:fe,style:{width:"18px",height:"18px","margin-top":"3px"}},null,-1),R(" Generate new face ")])),_:1},8,["onClick","disabled"])]}),_:1})])]),_:1}),r(u,{span:12,xs:24},{default:o(()=>[e("div",Re,[s[6]||(s[6]=e("h2",null,"Photo Upload Guidelines and Requirements",-1)),s[7]||(s[7]=e("p",null,"To get the best results, please upload 5 to 20 high-quality photos",-1)),r(k,{gutter:15},{default:o(()=>[r(u,{span:12,xs:24},{default:o(()=>s[4]||(s[4]=[e("div",{class:"bg-black app-base-padding app-base-border-radius"},[e("div",{class:"my-faces-create-example-images"},[e("div",null,[e("img",{src:_e})]),e("div",null,[e("img",{src:be})]),e("div",null,[e("img",{src:ve})])]),e("div",{class:"my-faces-create-example-info"},[e("p",null,"âœ… Good Photos"),e("span",null," Use bright natural lighting, capture multiple angles (front, side, three-quarter), show various expressions, and avoid heavy editing for accuracy. ")])],-1)])),_:1}),r(u,{span:12,xs:24},{default:o(()=>s[5]||(s[5]=[e("div",{class:"bg-black app-base-padding app-base-border-radius"},[e("div",{class:"my-faces-create-example-images"},[e("div",null,[e("img",{src:ye})]),e("div",null,[e("img",{src:he})]),e("div",null,[e("img",{src:we})])]),e("div",{class:"my-faces-create-example-info"},[e("p",null,"ðŸš« Bad Photos"),e("span",null," Avoid group photos. Ensure images are sharp, well-lit without shadows, and keep angles natural and straightforward. ")])],-1)])),_:1})]),_:1})])]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[_,a.loading]])])),a.progressShow?(i(),g("div",Se,[e("div",Te,[e("div",Ue,[r(I,{type:"circle",percentage:a.progressPercent,"stroke-width":12,width:250,indeterminate:!0},{default:o(({percentage:t})=>[e("div",null,h(t)+"%",1),s[11]||(s[11]=e("div",null,"Estimated time",-1)),e("div",null,h(a.progressPrettyTimer.secs)+" s / "+h(a.progressPrettyTimer.mins)+" min",1)]),_:1},8,["percentage"])]),e("div",Be,[s[13]||(s[13]=e("h1",null,"AI Model is generating",-1)),s[14]||(s[14]=e("p",null,"You can dismiss this screen while processing is in progress",-1)),r(C,null,{default:o(()=>s[12]||(s[12]=[R("Notify me when ready")])),_:1})])])])):q("",!0)])}const Je=M(ue,[["render",Ae]]);export{Je as default};
